# Disciplined Process Configuration v2.0
# Generated by /dp:init
version: "2.0"

# Project information
project:
  name: "{project-name}"
  language: "{language}"  # rust, typescript, python, go, zig, other

# Issue tracker selection
task_tracker: chainlink  # chainlink | beads | github | linear | markdown | none

# Chainlink-specific configuration (when task_tracker: chainlink)
chainlink:
  features:
    sessions: true       # Enable session-based work tracking
    milestones: true     # Enable milestone grouping
    time_tracking: false # Enable time tracking
  rules_path: .claude/rules/  # Rules directory (symlinked to .chainlink/rules/)

# Beads-specific configuration (when task_tracker: beads)
beads:
  auto_sync: true   # Auto-sync on git operations
  daemon: true      # Use background daemon for faster operations
  prefix: null      # Issue prefix (auto-generated if null)

# Enforcement level: how strictly to enforce the workflow
# - strict:  Block operations that violate workflow (tests must pass, traces required)
# - guided:  Warn but don't block (recommended for onboarding)
# - minimal: On-demand only, no automatic enforcement
enforcement:
  level: "guided"

  # Per-hook overrides (optional)
  overrides:
    pre_commit_tests: null    # Override for test enforcement
    trace_markers: null       # Override for @trace marker checks
    spec_issue_links: null    # Override for spec-issue bidirectional links
    task_id_commits: null     # Override for task ID in commit messages

# Adversarial review configuration (requires rlm-claude-code)
adversarial_review:
  enabled: false              # Enable adversarial validation
  model: "gemini-2.0-flash"   # Model for adversarial review
  max_iterations: 3           # Max back-and-forth iterations
  trigger: "on_review"        # on_review | on_commit | manual
  fresh_context: true         # Use fresh context for adversary (recommended)

# Specification configuration
specs:
  directory: "docs/spec"
  id_format: "SPEC-{section:02d}.{item:02d}"
  require_issue_link: false   # In strict mode, specs should link to issues

# ADR configuration
adrs:
  directory: "docs/adr"
  id_format: "ADR-{number:04d}"
  template: null              # Custom template path (optional)

# Test framework configuration
testing:
  frameworks:
    unit: "{unit-framework}"
    integration: "{integration-framework}"
    property: null            # Property-based testing framework (optional)
    e2e: null                 # End-to-end testing framework (optional)
  directories:
    unit: "tests/unit"
    integration: "tests/integration"
    property: "tests/property"
    e2e: "tests/e2e"

# Hook configuration
hooks:
  # Hooks that run before git commit
  pre_commit:
    - "run_tests"             # Run test suite
    - "check_traces"          # Verify @trace markers
  # Hooks that run after file writes
  post_write:
    - "check_traces"          # Check for missing traces in new files
  # Hooks that run before git push
  pre_push:
    - "sync_tasks"            # Sync task tracker

# Graceful degradation settings
degradation:
  # What to do when a component is unavailable
  on_tracker_unavailable: "warn"     # warn | skip | fail
  on_rlm_unavailable: "skip"         # warn | skip | fail
  on_adversary_unavailable: "skip"   # warn | skip | fail
